(this.webpackJsonpintro=this.webpackJsonpintro||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(1),a=n.n(s),r=n(19),o=n.n(r),i=(n(28),n(7)),l=n(12),j=n(2),u=(n(29),n(6)),b=Object(s.createContext)(),p=n(4),d=n.n(p),h=n(22),O=n(8);function x(e){var t=function(e,t){var n=Object(s.useState)(""),c=Object(u.a)(n,2),a=c[0],r=c[1],o=Object(s.useState)(!1),i=Object(u.a)(o,2),l=i[0],j=i[1],b=Object(s.useState)(null),p=Object(u.a)(b,2),x=p[0],m=p[1],f=Object(s.useState)(!0),v=Object(u.a)(f,2),g=v[0],N=v[1];return Object(s.useEffect)((function(){!function(){var n=Object(O.a)(d.a.mark((function n(){var c,s;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return j(!0),n.prev=1,n.next=4,fetch(e,{method:t});case 4:return c=n.sent,n.next=7,c.json();case 7:if(s=n.sent,c.ok){n.next=10;break}throw new Error(s.status);case 10:r((function(e){return Object(h.a)(s)})),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(1),m(n.t0.message);case 16:return n.prev=16,setTimeout((function(){return j(!1)}),1e3),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[1,13,16,19]])})));return function(){return n.apply(this,arguments)}}()()}),[g]),[a,r,l,x,g,N]}("".concat("http://localhost:7777/","posts"),"GET"),n=Object(u.a)(t,6),a=n[0],r=n[1],o=n[2],i=n[3],l=n[4],j=n[5],p=Object(s.useState)(""),x=Object(u.a)(p,2),m=x[0],f=x[1],v=Object(s.useState)(""),g=Object(u.a)(v,2),N=g[0],_=g[1];return Object(c.jsx)(b.Provider,{value:{posts:a,setPosts:r,isLoading:o,hasError:i,inputValue:m,setInputValue:f,selectedPost:N,setSelectedPost:_,fetchReqFlag:l,setFetchReqFlag:j},children:Object(c.jsx)("div",{className:"posts-widget_container",children:e.children})})}function m(e){var t=e.className;return Object(c.jsx)("div",{className:t,children:e.children})}function f(e){var t=Object(s.useContext)(b),n=t.inputValue,a=t.setInputValue,r=e.className;return Object(c.jsx)("textarea",{placeholder:"New text here...",name:"start-page_input",className:"post_input ".concat(r),onChange:function(e){e.target.style.height="".concat(e.target.scrollHeight,"px"),a(e.target.value)},value:n})}function v(e){var t=e.className,n=e.name,s=e.onBtnClick;return Object(c.jsx)("button",{className:"btn apply-btn ".concat(t),onClick:s,children:n})}var g=n(20),N=n.n(g);function _(e){var t=e.post,n=Object(s.useContext)(b).setSelectedPost;return Object(c.jsxs)(l.b,{to:"/posts/".concat(t.id),className:"post-item_box",onClick:function(){return function(e){n(e)}(t)},children:[Object(c.jsxs)("div",{className:"post-item_header",children:[Object(c.jsx)("img",{className:"post-item_avatar",src:t.avatar,alt:t.name}),Object(c.jsxs)("div",{className:"post-item_info",children:[Object(c.jsx)("span",{className:"post-item_info_name",children:t.name}),Object(c.jsx)("span",{className:"post-item_info_time",children:N()(t.created).format("DD-MM-YY hh:mm")})]})]}),Object(c.jsx)("div",{className:"post-item_content",children:t.content})]})}function k(){return Object(c.jsx)("div",{className:"loader",children:Object(c.jsx)("div",{className:"loader_inner"})})}function w(e){var t=e.posts,n=Object(s.useContext)(b),a=n.isLoading,r=n.hasError,o=t.length?Object(c.jsx)("div",{className:"posts__box",children:a?Object(c.jsx)(k,{}):r?Object(c.jsx)("div",{children:r}):t.map((function(e){return Object(c.jsx)(_,{post:e},e.id)}))}):Object(c.jsx)("div",{className:"empty-post_box",children:"\u0423 \u0432\u0430\u0441 \u0435\u0449\u0435 \u043d\u0435\u0442 \u043f\u043e\u0441\u0442\u043e\u0432!"});return Object(c.jsx)(c.Fragment,{children:o})}function C(e){var t=e.history,n=(e.match,Object(s.useContext)(b)),a=n.posts,r=n.inputValue;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(m,{className:"start-page_editable",children:[Object(c.jsx)(f,{className:"new-post_input"}),Object(c.jsx)(v,{className:"start-page_btn".concat(r.trim()?"":" inactive"),name:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442",onBtnClick:function(e){t.push("posts/new")}})]}),Object(c.jsx)(w,{posts:a})]})}function B(e){var t=e.className,n=e.onBtnClick;return Object(c.jsx)("button",{className:"btn cancel-btn ".concat(t),onClick:n,children:Object(c.jsx)("span",{className:"material-icon",children:"close"})})}function y(e){var t=e.history,n=Object(s.useContext)(b),a=n.inputValue,r=n.setInputValue,o=n.setFetchReqFlag,i=function(){var e=Object(O.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,fetch("".concat("http://localhost:7777/","posts"),{method:"POST",body:JSON.stringify({id:0,content:a})});case 4:e.sent.ok&&(o((function(e){return!e})),r(""),t.goBack()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)(m,{className:"new-post_card",children:[Object(c.jsxs)("header",{className:"page__title new-post_card_header",children:[Object(c.jsx)("h3",{children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430"}),Object(c.jsx)(B,{className:"new-post-page_btn",onBtnClick:function(e){e.preventDefault(),t.goBack()}})]}),Object(c.jsx)(f,{className:"new-post-card_input"}),Object(c.jsx)("div",{className:"btn_row",children:Object(c.jsx)(v,{name:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c",className:"new-post-page_btn",onBtnClick:i})})]})}function F(e){var t=e.match,n=e.history,a=Object(s.useContext)(b),r=a.selectedPost,o=a.setFetchReqFlag,i=a.setSelectedPost,l=a.setInputValue,j=function(){var e=Object(O.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("".concat("http://localhost:7777/","posts/").concat(r.id),{method:"DELETE"});case 4:e.sent.ok&&(o((function(e){return!e})),i(""),n.push("/")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("header",{className:"page__title new-post_card_header",children:[Object(c.jsx)("h3",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043f\u043e\u0441\u0442\u0430"}),Object(c.jsx)(B,{className:"new-post-page_btn",onBtnClick:function(e){e.preventDefault(),l(""),n.goBack()}})]}),Object(c.jsx)(_,{post:r}),Object(c.jsxs)("div",{className:"btn_row",children:[Object(c.jsx)(v,{name:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",className:"new-post-page_btn",onBtnClick:function(e){e.preventDefault(),l(r.content),n.push("".concat(t.url,"/editing"))}}),Object(c.jsx)(v,{name:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",className:"new-post-page_btn",onBtnClick:j})]})]})}function S(e){var t=e.history,n=Object(s.useContext)(b),a=n.inputValue,r=n.setInputValue,o=n.selectedPost,l=n.setSelectedPost,j=n.setFetchReqFlag,u=function(){var e=Object(O.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,fetch("".concat("http://localhost:7777/","posts"),{method:"POST",body:JSON.stringify({id:o.id,content:a})});case 4:e.sent.ok&&(j((function(e){return!e})),l((function(e){return Object(i.a)(Object(i.a)({},e),{},{content:a})})),r(""),t.goBack()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("header",{className:"page__title new-post_card_header",children:[Object(c.jsx)("h3",{children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0441\u0442\u0430"}),Object(c.jsx)(B,{className:"new-post-page_btn",onBtnClick:function(e){e.preventDefault(),r(""),t.goBack()}})]}),Object(c.jsxs)(m,{className:"new-post_card",children:[Object(c.jsx)(f,{className:"new-post-card_input"}),Object(c.jsx)("div",{className:"btn_row",children:Object(c.jsx)(v,{name:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c",className:"new-post-page_btn",onBtnClick:u})})]})]})}function D(e){var t=e.history;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{children:"\u0422\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}),Object(c.jsx)(v,{className:"start-page_btn",name:"\u041d\u0430\u0437\u0430\u0434",onBtnClick:function(){t.goBack()}})]})}var P=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"task-title",children:"CRUD"}),Object(c.jsx)(x,{children:Object(c.jsx)(l.a,{children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{path:"/posts/new",render:function(e){return Object(c.jsx)(y,Object(i.a)({},e))}}),Object(c.jsx)(j.a,{path:"/posts/:id/editing",render:function(e){return Object(c.jsx)(S,Object(i.a)({},e))}}),Object(c.jsx)(j.a,{path:"/posts/:id",render:function(e){return Object(c.jsx)(F,Object(i.a)({},e))}}),Object(c.jsx)(j.a,{path:"/",render:function(e){return Object(c.jsx)(C,Object(i.a)({},e))}}),Object(c.jsx)(j.a,{path:"*",render:function(e){return Object(c.jsx)(D,Object(i.a)({},e))}})]})})})]})};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(P,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.18d6e50f.chunk.js.map